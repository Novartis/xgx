## Templates - Exercises


<!-- Two different xgx excercise types:

1. xgx template testing
    - Go through the loading / altering of the dataframe under the "setup" section of a xgx Rmd Template
    - xgx_auto_explore
2. xgxr functions
    
-->

In this first excercise, we would like to display the difference of theme
between the `xgx_theme()` and the theme provided by ggplot2 within a 
simple time vs concentration plot.

Use a `xgx_plot()` function in place of the `ggplot2::ggplot()` function and 
notice the difference in output:


```{r theme, excercise=TRUE}


time <- rep(seq(1, 10), 5)
id <- sort(rep(seq(1, 5), 10))
conc <- exp(-time) * sort(rep(stats::rlnorm(5), 10))
data <- data.frame(time = time, concentration = conc, id = id)
gg <- ggplot2::ggplot(data = data,
                mapping = ggplot2::aes(x = time, y = concentration, group = id)) +
         ggplot2::geom_line() +
         ggplot2::geom_point()
print(gg)
```

```{r theme-solution}
time <- rep(seq(1, 10), 5)
id <- sort(rep(seq(1, 5), 10))
conc <- exp(-time) * sort(rep(stats::rlnorm(5), 10))
data <- data.frame(time = time, concentration = conc, id = id)
gg <- xgx_plot(data = data,
                mapping = ggplot2::aes(x = time, y = concentration, group = id)) +
         ggplot2::geom_line() +
         ggplot2::geom_point()
print(gg)
```


### Overview plots

#### PK overview of concentration over time

Plot the concentration over time
```{r pk_overview, excercise=TRUE}
gg <- ggplot(data = pk_data,
             aes(x = NOMTIME,
                 y = LIDV))
print(gg)
```

Now adjust this plot to group and color by dose
```{r pk_overview2, excercise=TRUE}

```

```{r ordinalplot, excercise=TRUE}
pkpd_data_wide_d5 <- pkpd_data_wide %>% subset(PROFDAY==5,) %>% subset(CENS==0,)
# pkpd_data_wide_d5 <- pkpd_data_wide_d5 %>% subset(Severity_label != "Severe")

# Display Binned Observed Data and Model Confidence Intervals
gg <- ggplot(data = pkpd_data_wide_d5, aes(x=CONC, color = Severity_label))
gg <- gg + xgx_stat_ci(bins = 5,
                       distribution = "ordinal",
                       geom = c("errorbar", "point"))
gg <- gg + xgx_stat_smooth(aes(response = Severity_label, fill = Severity_label), method = "polr")


# Cleanup
gg <- gg + xgx_scale_x_log10()
gg <- gg + guides(color=guide_legend(""),fill=guide_legend(""))
gg <- gg + labs(x=pdseverity_label, y="Probability of being within each class")
gg <- gg + xgx_annotate_status(status)

print(gg)
```